name = "infraforge-email-worker"
main = "index.js"
compatibility_date = "2026-01-05"

# Industry production standard:
# - No workers.dev
# - No preview URLs
workers_dev = false
preview_urls = false

############################
# ğŸŒ ROUTES (PRODUCTION)
############################

routes = [
  { pattern = "infraforgelabs.in/support/api/*", zone_name = "infraforgelabs.in" },
  { pattern = "infraforgelabs.in/reply", zone_name = "infraforgelabs.in" }
]

############################
# ğŸ“¬ EMAIL WORKER
############################

[emails]
enabled = true

############################
# ğŸ—„ï¸ D1 DATABASE
############################

[[d1_databases]]
binding = "DB"
database_name = "infraforgelabs-support"
database_id = "1bf97dc8-6256-437f-8263-ab633826057a"

############################
# ğŸ” NON-SECRET CONFIG
############################

[vars]
SMTP_FROM = "support@infraforgelabs.in"

############################
# ğŸ”‘ SECRETS (SET VIA CLI)
############################
# BREVO_API_KEY

[[r2_buckets]]
binding = "ATTACHMENTS"
bucket_name = "infraforgelabs-support-attachments"
